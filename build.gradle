/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java application project to get you started.
 * For more details on building Java & JVM projects, please refer to https://docs.gradle.org/8.8/userguide/building_java_projects.html in the Gradle documentation.
 */

plugins {
    // Apply the application plugin to add support for building a CLI application in Java.
    id 'java'
}

repositories {
    // Use Maven Central for resolving dependencies.
    mavenCentral()
}

dependencies {
    
testRuntimeOnly 'org.junit.platform:junit-platform-launcher'
testRuntimeOnly 'io.cucumber:cucumber-junit-platform-engine:7.20.1'
testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.11.3'

//Selenium y WebDriver Manager
// https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java
implementation 'org.seleniumhq.selenium:selenium-java:4.27.0'
// https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager
implementation 'io.github.bonigarcia:webdrivermanager:5.9.2'

//Cucumber y JUnit Suite
// https://mvnrepository.com/artifact/io.cucumber/cucumber-java
implementation 'io.cucumber:cucumber-java:7.20.1'
// https://mvnrepository.com/artifact/io.cucumber/cucumber-junit-platform-engine
testImplementation 'io.cucumber:cucumber-junit-platform-engine:7.20.1'
// https://mvnrepository.com/artifact/org.junit.platform/junit-platform-suite
testImplementation 'org.junit.platform:junit-platform-suite:1.11.3'
// https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter
testImplementation 'org.junit.jupiter:junit-jupiter:5.11.3'

// https://mvnrepository.com/artifact/io.qase/qase-cucumber-v7-reporter
testImplementation 'io.qase:qase-cucumber7-jvm:3.2.0'
testImplementation 'io.qase:qase-api-client:3.2.0'

}


// Apply a specific Java toolchain to ease working on different environments.
java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(21)
    }
}

tasks.named('test') {
    useJUnitPlatform() 

    systemProperties System.getProperties()

    //Activa el reporter de Qase
    systemProperty "qase.enable", "true"
    systemProperty "qase.mode", "testops"
    

    systemProperty "qase.project.code", "FRT"
    systemProperty "qase.api.token", "e82b65d4e7a0934a884de76e9c5ab8cba34d68f6a2dabc854260ab9d117103ff"

    //Comunicamos a Cucumber que use el plugin de Qase
    systemProperty "cucumber.plugin", "io.qase.cucumber7.QaseEventListener"

    // Esto permite que el reporter de Qase lea la configuraci√≥n del sistema
    systemProperty "qase.config", "src/test/resources/qase.config.json"

    systemProperty "cucumber.filter.tags", System.getProperty("cucumber.filter.tags")

    testLogging {
        events "passed", "skipped", "failed"
    }
}

